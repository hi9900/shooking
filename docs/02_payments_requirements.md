# 결제 모듈 요구사항 분석 및 기능 목록

## 📌 기본 정보

### 프로젝트명:

패션 쇼핑몰 결제 모듈

### 사용하게 될 기술:

<img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=white">
<img src="https://img.shields.io/badge/vite-646CFF?style=for-the-badge&logo=vite&logoColor=white">
<img src="https://img.shields.io/badge/typescript-3178C6?style=for-the-badge&logo=typescript&logoColor=white">
<img src="https://img.shields.io/badge/tailwindcss-06B6D4?style=for-the-badge&logo=tailwindcss&logoColor=white">

## 📝 고객 요구사항 정리

1. 여러 개의 카드를 등록할 수 있게 해주세요.
2. 카드 등록 과정에서 민감한 정보가 바로 노출되지 않도록 해주세요
3. 이 결제 모듈의 경우, 상품 목록에서 담기 버튼 바로 옆에 '결제' 버튼을 추가하여 동작할 수 있게 만들어주세요.

## 📋 기능 목록

### 1. 결제 버튼

- 상품 목록 페이지의 상품 카드에 '담기' 버튼 옆 '결제' 버튼 추가
- '결제' 버튼 클릭 시, 카드 목록 조회 페이지(또는 모달) 실행

### 2. 카드 목록 조회 (`<CardListPage />`)

- 사용자가 등록한 모든 카드를 수직 리스트 형태로 보여준다.

  - `<CardItem />`
    - 마스킹된 카드 번호 (예: `1111 2222 **** ****`), 카드 소유자 이름, 만료일(`MM/YY`)
    - 각 카드 아이템 우측 상단에 '삭제'(`X`) 버튼을 배치
    - 하단 '이 카드로 결제하기' 버튼: 클릭 시 결제 확인 로직으로 연결 (추후 구현)

- 등록된 카드가 없을 경우, '새로운 카드를 등록해주세요.' 메시지와 '카드 추가하기' 버튼을 화면에 표시한다.

### 3. 카드 추가 (`<CardAddPage />`)

- 사용자의 입력에 따라 실시간으로 정보가 채워지는 **카드 미리보기 이미지**를 제공한다. (`<CardItem />`)
- 카드 정보를 입력하는 폼(`<CardFormComponent>`)을 제공한다.

  - 카드 번호(`CardNumberInput`)

    - 숫자만 입력 가능
    - 4자리마다 하이픈(`-`) 자동 삽입
    - 총 16자리 입력 제한
    - 입력 즉시 카드 미리보기에 반영
    - 마지막 8자리 마스킹 (`1111-2222-****-****`)

  - 만료일(`ExpirationDateInput`)

    - `MM/YY` 형식으로만 입력 가능.
    - `MM`은 1-12, `YY`는 현재 년도 이상
    - 단일 입력 필드에서 `/` 자동 삽입
    - 플레이스 홀더: "MM/YY"
    - 입력 즉시 카드 미리보기에 반영

  - 카드 소유자 이름(`CardHolderNameInput`)

    - 영문 대/소문자, 공백만 입력 가능
    - 최대 30자 제한
    - 입력된 자릿수 표시 (`0/30`)
    - 플레이스홀더: "카드에 표시된 이름과 동일하게 입력하세요."
    - 입력 즉시 카드 미리보기에 반영

  - 보안 코드(CVC/CVV) (`CVCInput`)

    - 숫자 3자리만 입력 가능
    - 입력값 마스킹 (`***`)
    - 우측에 `?` 버튼 클릭 시 "카드 뒷면 3자리 숫자" 팝오버 표시

  - 카드 비밀번호 (`CardPasswordInput`)
    - 숫자 2자리만 입력 가능
    - 입력값 마스킹 (`**`)

- '작성 완료' 버튼
  - 클릭 시 모든 필드의 유효성을 검사한다.
  - 유효성 검사를 통과하지 못하면, 해당하는 입력 필드 아래에 에러 메시지를 표시한다.
  - 모든 정보가 유효하면, 카드 정보를 저장하고 '카드 목록 조회' 페이지로 이동한다.

### 4. 등록된 카드 삭제

- `<CardListPage />`의 각 카드 아이템 우측 상단 '삭제' 버튼
- 클릭 시 "이 카드를 정말 삭제하시겠습니까?" 확인 모달을 표시한다.
- '확인' 클릭 시 해당 카드를 전역 상태에서 제거하고, 목록 UI를 즉시 업데이트합니다.

---

### 기타 고려사항

- 유효성 검사: 모든 입력 필드에 대한 실시간 유효성 검사 및 에러 메시지 표시
- 상태 관리: 등록된 카드 목록, 현재 선택된 카드 등 결제 관련 상태는 ContextAPI를 사용하여 전역으로 관리

- 결제 버튼 클릭 시 카드 목록 조회 페이지 대신 결제 모달 (`<PaymentModal />`)로 이동한다.
  : 단순히 카드 목록 페이지로 보내는 것보다, 어떤 상품을 결제하는지를 보여준다.

  - 결제할 상품의 정보(이미지, 상품명, 가격)를 상단에 명확히 표시한다.
  - 결제에 사용할 카드를 선택하는 영역을 포함한다.
    - 선택 버튼 클릭 시 기존에 등록된 카드 목록을 보여준다.
    - 카드 하단에 '이 카드로 결제하기' 버튼을 제공하여 클릭 시 해당 카드를 보여준다.
    - 목록 하단에 '새로운 카드로 결제' 버튼을 제공하여, 클릭 시 카드 추가 페이지(`CardAddPage`)로 이동한다.
  - 카드 선택 완료 후 최종 결제 금액과 '결제하기' 버튼을 하단에 표시한다.
